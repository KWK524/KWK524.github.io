<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FGIP OJT Dashboard</title>
    <style>
        /* ÌÖåÎßàÎ≥Ñ Î≥ÄÏàò ÏÑ§Ï†ï */
        :root {
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-main: #111111;
            --text-sub: #666666;
            --accent-color: #007bff; /* Í∏∞Î≥∏ ÌååÎûë */
            --gauge-bg: #e9ecef;
            --highlight: #d9534f;
            --work-green: #28a745;
        }

        [data-theme="pink"] {
            --bg-color: #fff0f6;
            --card-bg: #ffffff;
            --text-main: #4b162c;
            --text-sub: #a67c8e;
            --accent-color: #ff85c0;
            --gauge-bg: #ffe0eb;
        }

        [data-theme="skyblue"] {
            --bg-color: #e6f7ff;
            --card-bg: #ffffff;
            --text-main: #002766;
            --text-sub: #69b1ff;
            --accent-color: #1890ff;
            --gauge-bg: #bae7ff;
        }

        [data-theme="white"] {
            --bg-color: #ffffff;
            --card-bg: #fdfdfd;
            --text-main: #000000;
            --text-sub: #888888;
            --accent-color: #444444;
            --gauge-bg: #eeeeee;
            --highlight: #000000;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e0e0e0;
            --text-sub: #a0a0a0;
            --accent-color: #bb86fc;
            --gauge-bg: #333333;
            --highlight: #cf6679;
        }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            transition: all 0.3s ease;
        }

        .container {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            text-align: center;
            width: 95%;
            max-width: 500px;
        }

        /* ÌÖåÎßà ÏÑ†ÌÉù Î≤ÑÌäº */
        .theme-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
        }

        .theme-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .theme-btn:hover { transform: scale(1.2); }
        .btn-pink { background: #ff85c0; }
        .btn-skyblue { background: #1890ff; }
        .btn-white { background: #ffffff; }
        .btn-dark { background: #333333; }

        .header-title {
            color: var(--accent-color);
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }

        .today-date {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 0.2rem;
        }

        .current-time {
            font-size: 1.3rem;
            color: var(--text-sub);
            margin-bottom: 1.5rem;
            font-family: 'Cascadia Code', monospace;
        }

        /* Gauges */
        .gauge-container {
            background: var(--gauge-bg);
            border-radius: 50px;
            height: 18px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        .gauge-fill {
            height: 100%;
            background: var(--accent-color);
            transition: width 0.05s linear;
        }
        .percent-text {
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Cascadia Code', monospace;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
        }

        /* Daily Section */
        #daily-section {
            display: none;
            margin: 1.5rem 0;
            padding: 1rem;
            border-radius: 16px;
            background: rgba(0,0,0,0.03);
            border: 1px dashed var(--accent-color);
        }
        .daily-fill { background: var(--work-green); }
        .daily-text { color: var(--work-green); font-size: 0.95rem; font-weight: bold; margin-top: 5px; }

        /* Stats */
        .stats-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gauge-bg);
        }
        .stat-card {
            text-align: left;
            padding: 0.8rem 1rem;
            background: rgba(0,0,0,0.02);
            border-radius: 12px;
        }
        .stat-label { font-size: 0.8rem; color: var(--text-sub); display: block; }
        .stat-value { font-size: 1.1rem; font-weight: 700; }
        .highlight { color: var(--highlight); }
    </style>
</head>
<body data-theme="skyblue">

<div class="container">
    <div class="theme-selector">
        <div class="theme-btn btn-pink" onclick="setTheme('pink')"></div>
        <div class="theme-btn btn-skyblue" onclick="setTheme('skyblue')"></div>
        <div class="theme-btn btn-white" onclick="setTheme('white')"></div>
        <div class="theme-btn btn-dark" onclick="setTheme('dark')"></div>
    </div>

    <div class="header-title">FGIP OJT</div>
    <div id="today-date" class="today-date"></div>
    <div id="current-time" class="current-time"></div>
    
    <div class="gauge-container">
        <div id="total-fill" class="gauge-fill"></div>
    </div>
    <div id="total-percent" class="percent-text">0.00000000%</div>

    <div id="daily-section">
        <div class="gauge-container">
            <div id="daily-fill" class="gauge-fill daily-fill"></div>
        </div>
        <div id="daily-remain-text" class="daily-text"></div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <span class="stat-label">üìÖ ÎÇ®ÏùÄ Í∑ºÎ¨¥Ïùº</span>
            <span id="remain-days" class="stat-value">0Ïùº</span>
        </div>
        <div class="stat-card">
            <span class="stat-label">‚è∞ Ï¥ù ÎÇ®ÏùÄ ÏàúÏàò ÏóÖÎ¨¥ ÏãúÍ∞Ñ</span>
            <span id="remain-work-hours" class="stat-value highlight">0ÏãúÍ∞Ñ 0Î∂Ñ 0Ï¥à</span>
        </div>
    </div>
</div>
    
<script>
    const START_DATE = new Date('2025-08-31T00:00:00+03:00');
    const END_DATE = new Date('2026-02-14T15:00:00+03:00');

    function setTheme(theme) {
        document.body.setAttribute('data-theme', theme);
    }

    function getGMT3Now() {
        const now = new Date();
        return new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (3 * 3600000));
    }

    function update() {
        const now = getGMT3Now();

        // 1. ÎÇ†Ïßú Î∞è ÏãúÍ∞Ñ
        document.getElementById('today-date').innerText = now.toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'short' });
        document.getElementById('current-time').innerText = now.toLocaleTimeString('ko-KR', { hour12: false }) + " (GMT+3)";

        // 2. Ï†ÑÏ≤¥ ÏßÑÌñâÎ•† (8ÏûêÎ¶¨)
        const totalMs = END_DATE - START_DATE;
        const elapsedMs = now - START_DATE;
        const progress = Math.max(0, Math.min(100, (elapsedMs / totalMs) * 100));
        document.getElementById('total-fill').style.width = progress + "%";
        document.getElementById('total-percent').innerText = progress.toFixed(8) + "% Í≤ΩÍ≥º";

        // 3. Î°úÏßÅ Í≥ÑÏÇ∞
        let remainDays = 0;
        let totalWorkSec = 0;
        let isWorkingNow = false;
        let dailyRemainingSec = 0;
        let dailyProgress = 0;

        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0,0,0,0);

        let scan = new Date(now);
        scan.setHours(0,0,0,0);

        while (scan <= END_DATE) {
            const day = scan.getDay(); // 0:Ïùº, 4:Î™©, 5:Í∏à, 6:ÌÜ†
            const isLastDay = scan.toDateString() === END_DATE.toDateString();
            const isShortDay = (day === 4 || isLastDay);

            if (day !== 5) {
                if (scan >= tomorrow) remainDays++;

                const shifts = [
                    { s: 6, e: 12 },
                    { s: 13, e: isShortDay ? 15 : 17 }
                ];

                const dayStart = new Date(scan).setHours(6, 0, 0, 0);
                const dayEnd = new Date(scan).setHours(isShortDay ? 15 : 17, 0, 0, 0);

                shifts.forEach(shift => {
                    let sT = new Date(scan).setHours(shift.s, 0, 0, 0);
                    let eT = new Date(scan).setHours(shift.e, 0, 0, 0);
                    let effS = Math.max(sT, now.getTime());
                    if (effS < eT) totalWorkSec += (eT - effS) / 1000;
                });

                if (scan.toDateString() === now.toDateString()) {
                    if (now.getTime() >= dayStart && now.getTime() < dayEnd) {
                        isWorkingNow = true;
                        dailyProgress = ((now.getTime() - dayStart) / (dayEnd - dayStart)) * 100;
                        dailyRemainingSec = (dayEnd - now.getTime()) / 1000;
                    }
                }
            }
            scan.setDate(scan.getDate() + 1);
        }

        // 4. UI ÏóÖÎç∞Ïù¥Ìä∏
        document.getElementById('remain-days').innerText = remainDays + "Ïùº";
        
        const h = Math.floor(totalWorkSec / 3600);
        const m = Math.floor((totalWorkSec % 3600) / 60);
        const s = Math.floor(totalWorkSec % 60);
        document.getElementById('remain-work-hours').innerText = `${h.toLocaleString()}ÏãúÍ∞Ñ ${m}Î∂Ñ ${s}Ï¥à`;

        const dailySec = document.getElementById('daily-section');
        if (isWorkingNow) {
            dailySec.style.display = 'block';
            document.getElementById('daily-fill').style.width = dailyProgress + "%";
            const dh = Math.floor(dailyRemainingSec / 3600);
            const dm = Math.floor((dailyRemainingSec % 3600) / 60);
            const ds = Math.floor(dailyRemainingSec % 60);
            document.getElementById('daily-remain-text').innerText = `Ìá¥Í∑ºÍπåÏßÄ ${String(dh).padStart(2,'0')}:${String(dm).padStart(2,'0')}:${String(ds).padStart(2,'0')} ÎÇ®Ïùå`;
        } else {
            dailySec.style.display = 'none';
        }
    }

    setInterval(update, 50);
    update();
</script>

</body>
</html>
